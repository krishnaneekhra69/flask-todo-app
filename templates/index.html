{% extends "base.html" %}
{% block content %}
<div class="container">
  <div class="top">
    <a class="btn" href="{{ url_for('add') }}">+ Add Todo</a>
  </div>

  {% if todos %}
    <ul class="todo-list">
      {% for t in todos %}
        <li class="todo {% if t['done'] == 1 %}done{% endif %}">
          <div class="left">
            <form method="POST" action="{{ url_for('toggle', todo_id=t['id']) }}">
              <button class="icon-btn" type="submit">{{ '✓' if t['done']==1 else '○' }}</button>
            </form>
            <div class="meta">
              <strong>{{ t['title'] }}</strong>
              <p class="desc">{{ t['description'] }}</p>
              <small class="time">{{ t['created_at'] }}</small>
            </div>
          </div>

          <div class="right">
            <a class="btn small" href="{{ url_for('edit', todo_id=t['id']) }}">Edit</a>

            <form method="POST" action="{{ url_for('delete', todo_id=t['id']) }}" onsubmit="return confirm('Delete this todo?');" style="display:inline;">
              <button class="btn small danger" type="submit">Delete</button>
            </form>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No todos yet. Add one!</p>
  {% endif %}
</div>
{% endblock %}
